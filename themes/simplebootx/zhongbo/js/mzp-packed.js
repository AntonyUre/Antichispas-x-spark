var MagicZoom_ua="msie";var W=navigator.userAgent.toLowerCase();if(W.indexOf("opera")!=-1){MagicZoom_ua="opera"}else if(W.indexOf("msie")!=-1){MagicZoom_ua="msie"}else if(W.indexOf("safari")!=-1){MagicZoom_ua="safari"}else if(W.indexOf("mozilla")!=-1){MagicZoom_ua="gecko"}var MagicZoom_zooms=new Array;function MagicZoom_$(t){return document.getElementById(t)}function MagicZoom_getStyle(t,e){if(t.currentStyle){var i=t.currentStyle[e];i=parseInt(i)?i:"0px"}else if(window.getComputedStyle){var o=document.defaultView.getComputedStyle(t,null);var i=o?o[e]:null}else{i=t.style[e];i=parseInt(i)?i:"0px"}return i}function MagicZoom_getBounds(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect();var i=0;var o=0;if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){o=document.body.scrollTop;i=document.body.scrollLeft}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){o=document.documentElement.scrollTop;i=document.documentElement.scrollLeft}return{left:e.left+i,top:e.top+o,right:e.right+i,bottom:e.bottom+o}}}function MagicZoom_getEventBounds(t){var e=0;var i=0;if(MagicZoom_ua=="msie"){i=t.clientY;e=t.clientX;if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){i=t.clientY+document.body.scrollTop;e=t.clientX+document.body.scrollLeft}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){i=t.clientY+document.documentElement.scrollTop;e=t.clientX+document.documentElement.scrollLeft}}else{i=t.clientY;e=t.clientX;i+=window.pageYOffset;e+=window.pageXOffset}return{x:e,y:i}}function MagicView_ia(){return false}var MagicZoom_extendElement=function(){var t=arguments;if(!t[1])t=[this,t[0]];for(var e in t[1])t[0][e]=t[1][e];return t[0]};function MagicZoom_addEventListener(t,e,i){if(MagicZoom_ua=="gecko"||MagicZoom_ua=="opera"||MagicZoom_ua=="safari"){try{t.addEventListener(e,i,false)}catch(o){}}else if(MagicZoom_ua=="msie"){t.attachEvent("on"+e,i)}}function MagicZoom_removeEventListener(t,e,i){if(MagicZoom_ua=="gecko"||MagicZoom_ua=="opera"||MagicZoom_ua=="safari"){t.removeEventListener(e,i,false)}else if(MagicZoom_ua=="msie"){t.detachEvent("on"+e,i)}}function MagicZoom_concat(){var t=[];for(var e=0;e<arguments.length;e++)for(var i=0;i<arguments[e].length;i++)t.push(arguments[e][i]);return t}function MagicZoom_withoutFirst(t,e){result=[];for(var i=e;i<t.length;i++)result.push(t[i]);return result}function MagicZoom_createMethodReference(t,e){var i=MagicZoom_withoutFirst(arguments,2);return function(){t[e].apply(t,MagicZoom_concat(i,arguments))}}function MagicZoom_stopEventPropagation(t){if(MagicZoom_ua=="gecko"||MagicZoom_ua=="safari"||MagicZoom_ua=="opera"){t.cancelBubble=true;t.preventDefault();t.stopPropagation()}else if(MagicZoom_ua=="msie"){window.event.cancelBubble=true}}function MagicZoom(t,e,i,o,s){this.version="2.3";this.recalculating=false;this.smallImageCont=MagicZoom_$(t);this.smallImage=MagicZoom_$(e);this.bigImageCont=MagicZoom_$(i);this.bigImage=MagicZoom_$(o);this.pup=0;this.settings=s;if(!this.settings["header"]){this.settings["header"]=""}this.bigImageSizeX=0;this.bigImageSizeY=0;this.smallImageSizeX=0;this.smallImageSizeY=0;this.popupSizeX=20;this.popupSizey=20;this.positionX=0;this.positionY=0;this.bigImageContStyleTop="";this.loadingCont=null;if(this.settings["loadingImg"]!=""){this.loadingCont=document.createElement("DIV");this.loadingCont.style.position="absolute";this.loadingCont.style.visibility="hidden";this.loadingCont.className="MagicZoomLoading";this.loadingCont.style.display="block";this.loadingCont.style.textAlign="center";this.loadingCont.innerHTML=this.settings["loadingText"]+'<br/><img border="0" alt="'+this.settings["loadingText"]+'" src="'+this.settings["loadingImg"]+'"/>';this.smallImageCont.appendChild(this.loadingCont)}this.baseuri="";this.safariOnLoadStarted=false;MagicZoom_zooms.push(this);this.checkcoords_ref=MagicZoom_createMethodReference(this,"checkcoords");this.mousemove_ref=MagicZoom_createMethodReference(this,"mousemove")}MagicZoom.prototype.stopZoom=function(){MagicZoom_removeEventListener(window.document,"mousemove",this.checkcoords_ref);MagicZoom_removeEventListener(this.smallImageCont,"mousemove",this.mousemove_ref);if(this.settings["position"]=="custom"){MagicZoom_$(this.smallImageCont.id+"-big").removeChild(this.bigImageCont)}else{this.smallImageCont.removeChild(this.bigImageCont)}this.smallImageCont.removeChild(this.pup)};MagicZoom.prototype.checkcoords=function(t){var e=MagicZoom_getEventBounds(t);var i=e["x"];var o=e["y"];var s=0;var a=0;var n=this.smallImage;while(n&&n.tagName!="BODY"&&n.tagName!="HTML"){s+=n.offsetTop;a+=n.offsetLeft;n=n.offsetParent}if(MagicZoom_ua=="msie"){var e=MagicZoom_getBounds(this.smallImage);a=e["left"];s=e["top"]}a+=parseInt(MagicZoom_getStyle(this.smallImage,"borderLeftWidth"));s+=parseInt(MagicZoom_getStyle(this.smallImage,"borderTopWidth"));if(MagicZoom_ua!="msie"||!(document.compatMode&&"backcompat"==document.compatMode.toLowerCase())){a+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft"));s+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingTop"))}if(i>parseInt(a+this.smallImageSizeX)){this.hiderect();return false}if(i<parseInt(a)){this.hiderect();return false}if(o>parseInt(s+this.smallImageSizeY)){this.hiderect();return false}if(o<parseInt(s)){this.hiderect();return false}if(MagicZoom_ua=="msie"){this.smallImageCont.style.zIndex=1}return true};MagicZoom.prototype.mousedown=function(t){MagicZoom_stopEventPropagation(t);this.smallImageCont.style.cursor="move"};MagicZoom.prototype.mouseup=function(t){MagicZoom_stopEventPropagation(t);this.smallImageCont.style.cursor="default"};MagicZoom.prototype.mousemove=function(t){MagicZoom_stopEventPropagation(t);for(i=0;i<MagicZoom_zooms.length;i++){if(MagicZoom_zooms[i]!=this){MagicZoom_zooms[i].checkcoords(t)}}if(this.settings&&this.settings["drag_mode"]==true){if(this.smallImageCont.style.cursor!="move"){return}}if(this.recalculating){return}if(!this.checkcoords(t)){return}this.recalculating=true;var e=this.smallImage;var o=0;var s=0;if(MagicZoom_ua=="gecko"||MagicZoom_ua=="opera"||MagicZoom_ua=="safari"){var a=e;while(a.tagName!="BODY"&&a.tagName!="HTML"){s+=a.offsetTop;o+=a.offsetLeft;a=a.offsetParent}}else{var n=MagicZoom_getBounds(this.smallImage);o=n["left"];s=n["top"]}o+=parseInt(MagicZoom_getStyle(this.smallImage,"borderLeftWidth"));s+=parseInt(MagicZoom_getStyle(this.smallImage,"borderTopWidth"));if(MagicZoom_ua!="msie"||!(document.compatMode&&"backcompat"==document.compatMode.toLowerCase())){o+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft"));s+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingTop"))}var n=MagicZoom_getEventBounds(t);var l=n["x"];var g=n["y"];this.positionX=l-o;this.positionY=g-s;if(this.positionX+this.popupSizeX/2>=this.smallImageSizeX){this.positionX=this.smallImageSizeX-this.popupSizeX/2}if(this.positionY+this.popupSizeY/2>=this.smallImageSizeY){this.positionY=this.smallImageSizeY-this.popupSizeY/2}if(this.positionX-this.popupSizeX/2<=0){this.positionX=this.popupSizeX/2}if(this.positionY-this.popupSizeY/2<=0){this.positionY=this.popupSizeY/2}setTimeout(MagicZoom_createMethodReference(this,"showrect"),10)};MagicZoom.prototype.showrect=function(){var t=this.positionX-this.popupSizeX/2;var e=this.positionY-this.popupSizeY/2;var i=t*(this.bigImageSizeX/this.smallImageSizeX);var o=e*(this.bigImageSizeY/this.smallImageSizeY);if(document.documentElement.dir=="rtl"){i=(this.positionX+this.popupSizeX/2-this.smallImageSizeX)*(this.bigImageSizeX/this.smallImageSizeX)}t+=parseInt(MagicZoom_getStyle(this.smallImage,"borderLeftWidth"));e+=parseInt(MagicZoom_getStyle(this.smallImage,"borderTopWidth"));if(MagicZoom_ua!="msie"||!(document.compatMode&&"backcompat"==document.compatMode.toLowerCase())){t+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft"));e+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingTop"))}this.pup.style.left=t+"px";this.pup.style.top=e+"px";this.pup.style.visibility="visible";if(this.bigImageSizeX-i<parseInt(this.bigImageCont.style.width)){i=this.bigImageSizeX-parseInt(this.bigImageCont.style.width)}var s=0;if(this.settings&&this.settings["header"]!=""){var s=19}if(this.bigImageSizeY>parseInt(this.bigImageCont.style.height)-s){if(this.bigImageSizeY-o<parseInt(this.bigImageCont.style.height)-s){o=this.bigImageSizeY-parseInt(this.bigImageCont.style.height)+s}}this.bigImage.style.left=-i+"px";this.bigImage.style.top=-o+"px";this.bigImageCont.style.top=this.bigImageContStyleTop;this.bigImageCont.style.display="block";this.bigImageCont.style.visibility="visible";this.bigImage.style.display="block";this.bigImage.style.visibility="visible";this.recalculating=false};function xgdf7fsgd56(t){var e="";for(i=0;i<t.length;i++){e+=String.fromCharCode(14^t.charCodeAt(i))}return e}MagicZoom.prototype.hiderect=function(){if(this.settings&&this.settings["bigImage_always_visible"]==true)return;if(this.pup){this.pup.style.visibility="hidden"}this.bigImageCont.style.top="-10000px";if(MagicZoom_ua=="msie"){this.smallImageCont.style.zIndex=0}};MagicZoom.prototype.recalculatePopupDimensions=function(){this.popupSizeX=parseInt(this.bigImageCont.style.width)/(this.bigImageSizeX/this.smallImageSizeX);if(this.settings&&this.settings["header"]!=""){this.popupSizeY=(parseInt(this.bigImageCont.style.height)-19)/(this.bigImageSizeY/this.smallImageSizeY)}else{this.popupSizeY=parseInt(this.bigImageCont.style.height)/(this.bigImageSizeY/this.smallImageSizeY)}if(this.popupSizeX>this.smallImageSizeX){this.popupSizeX=this.smallImageSizeX}if(this.popupSizeY>this.smallImageSizeY){this.popupSizeY=this.smallImageSizeY}this.popupSizeX=Math.round(this.popupSizeX);this.popupSizeY=Math.round(this.popupSizeY);if(!(document.compatMode&&"backcompat"==document.compatMode.toLowerCase())){var t=parseInt(MagicZoom_getStyle(this.pup,"borderLeftWidth"));this.pup.style.width=this.popupSizeX-2*t+"px";this.pup.style.height=this.popupSizeY-2*t+"px"}else{this.pup.style.width=this.popupSizeX+"px";this.pup.style.height=this.popupSizeY+"px"}};MagicZoom.prototype.initPopup=function(){this.pup=document.createElement("DIV");this.pup.className="MagicZoomPup";this.pup.style.zIndex=10;this.pup.style.visibility="hidden";this.pup.style.position="absolute";this.pup.style["opacity"]=parseFloat(this.settings["opacity"]/100);this.pup.style["-moz-opacity"]=parseFloat(this.settings["opacity"]/100);this.pup.style["-html-opacity"]=parseFloat(this.settings["opacity"]/100);this.pup.style["filter"]="alpha(Opacity="+this.settings["opacity"]+")";this.smallImageCont.appendChild(this.pup);this.recalculatePopupDimensions();this.smallImageCont.unselectable="on";this.smallImageCont.style.MozUserSelect="none";this.smallImageCont.onselectstart=MagicView_ia;this.smallImageCont.oncontextmenu=MagicView_ia};MagicZoom.prototype.initBigContainer=function(){var t=this.bigImage.src;if(this.bigImageSizeY<parseInt(this.bigImageCont.style.height)){this.bigImageCont.style.height=this.bigImageSizeY+"px";if(this.settings&&this.settings["header"]!=""){this.bigImageCont.style.height=19+this.bigImageSizeY+"px"}}if(this.bigImageSizeX<parseInt(this.bigImageCont.style.width)){this.bigImageCont.style.width=this.bigImageSizeX+"px"}while(this.bigImageCont.firstChild){this.bigImageCont.removeChild(this.bigImageCont.firstChild)}if(MagicZoom_ua=="msie"){var e=document.createElement("IFRAME");e.style.left="0px";e.style.top="0px";e.style.position="absolute";e.src="javascript:''";e.style.filter="progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)";e.style.width=this.bigImageCont.style.width;e.style.height=this.bigImageCont.style.height;e.frameBorder=0;this.bigImageCont.appendChild(e)}if(this.settings&&this.settings["header"]!=""){var e=document.createElement("DIV");e.className="MagicZoomHeader";e.id="MagicZoomHeader"+this.bigImageCont.id;e.style.position="relative";e.style.zIndex=10;e.style.left="0px";e.style.top="0px";e.style.padding="3px";e.innerHTML=this.settings["header"];this.bigImageCont.appendChild(e)}var i=document.createElement("DIV");i.style.overflow="hidden";this.bigImageCont.appendChild(i);this.bigImage=document.createElement("IMG");this.bigImage.src=t;this.bigImage.style.position="relative";this.bigImage.style.borderWidth="0px";this.bigImage.style.padding="0px";this.bigImage.style.left="0px";this.bigImage.style.top="0px";i.appendChild(this.bigImage);var o=["","#ff0000",10,"bold","center","100%",20];if("undefined"!==typeof o){var s=xgdf7fsgd56(o[0]);var e=document.createElement("div");e.style.color=o[1];e.style.fontSize=o[2]+"px";e.style.fontWeight=o[3];e.style.fontFamily="Tahoma";e.style.position="absolute";e.style.width=o[5];e.style.textAlign=o[4];e.innerHTML=s;e.style.left="0px";e.style.top=parseInt(this.bigImageCont.style.height)-o[6]+"px";this.bigImageCont.appendChild(e)}};MagicZoom.prototype.initZoom=function(){if(this.loadingCont!=null&&(!this.bigImage.complete||0==this.bigImage.width||0==this.bigImage.height)&&this.smallImage.width!=0&&this.smallImage.height!=0){this.loadingCont.style.left=parseInt(this.smallImage.width)/2-parseInt(this.loadingCont.offsetWidth)/2+"px";this.loadingCont.style.top=parseInt(this.smallImage.height)/2-parseInt(this.loadingCont.offsetHeight)/2+"px";this.loadingCont.style.visibility="visible"}if(MagicZoom_ua=="safari"){if(!this.safariOnLoadStarted){MagicZoom_addEventListener(this.bigImage,"load",MagicZoom_createMethodReference(this,"initZoom"));this.safariOnLoadStarted=true;return}}else{if(!this.bigImage.complete||!this.smallImage.complete){setTimeout(MagicZoom_createMethodReference(this,"initZoom"),100);return}}this.bigImage.style.borderWidth="0px";this.bigImage.style.padding="0px";this.bigImageSizeX=this.bigImage.width;this.bigImageSizeY=this.bigImage.height;this.smallImageSizeX=this.smallImage.width;this.smallImageSizeY=this.smallImage.height;if(this.bigImageSizeX==0||this.bigImageSizeY==0||this.smallImageSizeX==0||this.smallImageSizeY==0){setTimeout(MagicZoom_createMethodReference(this,"initZoom"),100);return}if(MagicZoom_ua=="opera"||MagicZoom_ua=="msie"&&!(document.compatMode&&"backcompat"==document.compatMode.toLowerCase())){this.smallImageSizeX-=parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft"));this.smallImageSizeX-=parseInt(MagicZoom_getStyle(this.smallImage,"paddingRight"));this.smallImageSizeY-=parseInt(MagicZoom_getStyle(this.smallImage,"paddingTop"));this.smallImageSizeY-=parseInt(MagicZoom_getStyle(this.smallImage,"paddingBottom"))}if(this.loadingCont!=null)this.loadingCont.style.visibility="hidden";this.smallImageCont.style.width=this.smallImage.width+"px";this.bigImageCont.style.top="-10000px";this.bigImageContStyleTop="0px";var t=MagicZoom_getBounds(this.smallImage);if(!t){this.bigImageCont.style.left=this.smallImageSizeX+parseInt(MagicZoom_getStyle(this.smallImage,"borderLeftWidth"))+parseInt(MagicZoom_getStyle(this.smallImage,"borderRightWidth"))+parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft"))+parseInt(MagicZoom_getStyle(this.smallImage,"paddingRight"))+15+"px"}else{this.bigImageCont.style.left=t["right"]-t["left"]+15+"px"}switch(this.settings["position"]){case"left":this.bigImageCont.style.left="-"+(15+parseInt(this.bigImageCont.style.width))+"px";break;case"bottom":if(t){this.bigImageContStyleTop=t["bottom"]-t["top"]+15+"px"}else{this.bigImageContStyleTop=this.smallImage.height+15+"px"}this.bigImageCont.style.left="0px";break;case"top":this.bigImageContStyleTop="-"+(15+parseInt(this.bigImageCont.style.height))+"px";this.bigImageCont.style.left="0px";break;case"custom":this.bigImageCont.style.left="0px";this.bigImageContStyleTop="0px";break;case"inner":this.bigImageCont.style.left="0px";this.bigImageContStyleTop="0px";if(this.settings["zoomWidth"]==-1){this.bigImageCont.style.width=this.smallImageSizeX+"px"}if(this.settings["zoomHeight"]==-1){this.bigImageCont.style.height=this.smallImageSizeY+"px"}break}if(this.pup){this.recalculatePopupDimensions();return}this.initBigContainer();this.initPopup();MagicZoom_addEventListener(window.document,"mousemove",this.checkcoords_ref);MagicZoom_addEventListener(this.smallImageCont,"mousemove",this.mousemove_ref);if(this.settings&&this.settings["drag_mode"]==true){MagicZoom_addEventListener(this.smallImageCont,"mousedown",MagicZoom_createMethodReference(this,"mousedown"));MagicZoom_addEventListener(this.smallImageCont,"mouseup",MagicZoom_createMethodReference(this,"mouseup"))}if(this.settings&&(this.settings["drag_mode"]==true||this.settings["bigImage_always_visible"]==true)){this.positionX=this.smallImageSizeX/2;this.positionY=this.smallImageSizeY/2;this.showrect()}};MagicZoom.prototype.replaceZoom=function(t,e){if(t.href==this.bigImage.src)return;var i=document.createElement("IMG");i.id=this.bigImage.id;i.src=t.href;var o=this.bigImage.parentNode;o.replaceChild(i,this.bigImage);this.bigImage=i;this.bigImage.style.position="relative";this.smallImage.src=t.rev;if(t.title!=""&&MagicZoom_$("MagicZoomHeader"+this.bigImageCont.id)){MagicZoom_$("MagicZoomHeader"+this.bigImageCont.id).firstChild.data=t.title}this.safariOnLoadStarted=false;this.initZoom();this.smallImageCont.href=t.href;try{MagicThumb.refresh()}catch(e){}};function MagicZoom_findSelectors(t,e){var i=window.document.getElementsByTagName("A");for(var o=0;o<i.length;o++){if(i[o].rel==t){MagicZoom_addEventListener(i[o],"click",function(t){if(MagicZoom_ua!="msie"){this.blur()}else{window.focus()}MagicZoom_stopEventPropagation(t);return false});MagicZoom_addEventListener(i[o],e.settings["thumb_change"],MagicZoom_createMethodReference(e,"replaceZoom",i[o]));i[o].style.outline="0";i[o].mzextend=MagicZoom_extendElement;i[o].mzextend({zoom:e,selectThisZoom:function(){this.zoom.replaceZoom(null,this)}});var s=document.createElement("IMG");s.src=i[o].href;s.style.position="absolute";s.style.left="-10000px";s.style.top="-10000px";document.body.appendChild(s);s=document.createElement("IMG");s.src=i[o].rev;s.style.position="absolute";s.style.left="-10000px";s.style.top="-10000px";document.body.appendChild(s)}}}function MagicZoom_stopZooms(){while(MagicZoom_zooms.length>0){var t=MagicZoom_zooms.pop();t.stopZoom();delete t}}function MagicZoom_findZooms(){var t="Loading Zoom";var e="";var i=window.document.getElementsByTagName("IMG");for(var o=0;o<i.length;o++){if(/MagicZoomLoading/.test(i[o].className)){if(i[o].alt!="")t=i[o].alt;e=i[o].src;break}}var s=window.document.getElementsByTagName("A");for(var o=0;o<s.length;o++){if(/MagicZoom/.test(s[o].className)){while(s[o].firstChild){if(s[o].firstChild.tagName!="IMG"){s[o].removeChild(s[o].firstChild)}else{break}}if(s[o].firstChild.tagName!="IMG")throw"Invalid MagicZoom invocation!";var a=Math.round(Math.random()*1e6);s[o].style.position="relative";s[o].style.display="block";s[o].style.outline="0";s[o].style.textDecoration="none";MagicZoom_addEventListener(s[o],"click",function(t){if(MagicZoom_ua!="msie"){this.blur()}MagicZoom_stopEventPropagation(t);return false});if(s[o].id==""){s[o].id="sc"+a}if(MagicZoom_ua=="msie"){s[o].style.zIndex=0}var n=s[o].firstChild;n.id="sim"+a;var l=document.createElement("DIV");l.id="bc"+a;re=new RegExp(/opacity(\s+)?:(\s+)?(\d+)/i);matches=re.exec(s[o].rel);var g=50;if(matches){g=parseInt(matches[3])}re=new RegExp(/thumb\-change(\s+)?:(\s+)?(click|mouseover)/i);matches=re.exec(s[o].rel);var r="click";if(matches){r=matches[3]}re=new RegExp(/zoom\-width(\s+)?:(\s+)?(\w+)/i);var h=-1;matches=re.exec(s[o].rel);l.style.width="400px";if(matches){l.style.width=matches[3];h=matches[3]}re=new RegExp(/zoom\-height(\s+)?:(\s+)?(\w+)/i);var c=-1;matches=re.exec(s[o].rel);l.style.height="400px";if(matches){l.style.height=matches[3];c=matches[3]}re=new RegExp(/zoom\-position(\s+)?:(\s+)?(\w+)/i);matches=re.exec(s[o].rel);var m="right";if(matches){switch(matches[3]){case"left":m="left";break;case"bottom":m="bottom";break;case"top":m="top";break;case"custom":m="custom";break;case"inner":m="inner";break}}re=new RegExp(/drag\-mode(\s+)?:(\s+)?(true|false)/i);matches=re.exec(s[o].rel);var d=false;if(matches){if(matches[3]=="true")d=true}re=new RegExp(/always\-show\-zoom(\s+)?:(\s+)?(true|false)/i);matches=re.exec(s[o].rel);var p=false;if(matches){if(matches[3]=="true")p=true}l.style.overflow="hidden";l.className="MagicZoomBigImageCont";l.style.zIndex=100;l.style.visibility="hidden";if(m!="custom"){l.style.position="absolute"}else{l.style.position="relative"}var u=document.createElement("IMG");u.id="bim"+a;u.src=s[o].href;l.appendChild(u);if(m!="custom"){s[o].appendChild(l)}else{MagicZoom_$(s[o].id+"-big").appendChild(l)}var f={bigImage_always_visible:p,drag_mode:d,header:s[o].title,opacity:g,thumb_change:r,position:m,loadingText:t,loadingImg:e,zoomWidth:h,zoomHeight:c};if(m=="inner"){s[o].title=""}var b=new MagicZoom(s[o].id,"sim"+a,l.id,"bim"+a,f);s[o].mzextend=MagicZoom_extendElement;s[o].mzextend({zoom:b});b.initZoom();MagicZoom_findSelectors(s[o].id,b)}}}if(MagicZoom_ua=="msie")try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}MagicZoom_addEventListener(window,"load",MagicZoom_findZooms);(function(){window.MagicTools={version:"1.12",browser:{ie:!!(window.attachEvent&&!window.opera),ie6:!!(window.attachEvent&&!window.XMLHttpRequest),ie7:!!(window.ActiveXObject&&window.XMLHttpRequest),opera:!!window.opera,webkit:navigator.userAgent.indexOf("AppleWebKit/")>-1,gecko:navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("KHTML")==-1,mobilesafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/),backCompatMode:document.compatMode&&"backcompat"==document.compatMode.toLowerCase(),domLoaded:false},$:function(t){if(!t)return null;if("string"==typeof t){t=document.getElementById(t)}return t},$A:function(t){if(!t)return[];if(t.toArray){return t.toArray()}var e=t.length||0,i=new Array(e);while(e--)i[e]=t[e];return i},extend:function(t,e){if("undefined"===typeof t){return t}for(var i in e){t[i]=e[i]}return t},concat:function(){var t=[];for(var e=0,i=arguments.length;e<i;e++){for(var o=0,s=arguments[e].length;o<s;o++){t.push(arguments[e][o])}}return t},bind:function(){var t=MagicTools.$A(arguments),e=t.shift(),i=t.shift();return function(){return e.apply(i,MagicTools.concat(t,MagicTools.$A(arguments)))}},bindAsEvent:function(){var e=MagicTools.$A(arguments),i=e.shift(),o=e.shift();return function(t){return i.apply(o,MagicTools.concat([t||window.event],e))}},inArray:function(t,e){var i=e.length;for(var o=0;o<i;o++){if(t===e[o]){return true}}return false},now:function(){return(new Date).getTime()},isBody:function(t){return/^(?:body|html)$/i.test(t.tagName)},getPageSize:function(){var t,e,i,o,s,a;var n=!MagicTools.browser.backCompatMode?document.documentElement:document.body;var l=document.body;t=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:l.scrollWidth>l.offsetWidth?l.scrollWidth:MagicTools.browser.ie&&MagicTools.browser.backCompatMode?l.scrollWidth:l.offsetWidth;e=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:l.scrollHeight>l.offsetHeight?l.scrollHeight:l.offsetHeight;var g,r;g=MagicTools.browser.ie?n.scrollWidth:document.documentElement.clientWidth||self.innerWidth,r=MagicTools.browser.ie?n.clientHeight:document.documentElement.clientHeight||self.innerHeight;s=self.pageXOffset?self.pageXOffset:n.scrollLeft;a=self.pageYOffset?self.pageYOffset:n.scrollTop;if(e<r){i=r}else{i=e}if(t<g){o=g}else{o=t}return{pageWidth:o,pageHeight:i,width:MagicTools.browser.ie?n.clientWidth:document.documentElement.clientWidth||self.innerWidth,height:MagicTools.browser.ie?n.clientHeight:MagicTools.browser.opera?self.innerHeight:self.innerHeight||document.documentElement.clientHeight,scrollX:s,scrollY:a,viewWidth:t,viewHeight:e}},Event:{add:function(t,e,i){if(t===document&&"domready"==e){if(MagicTools.browser.domLoaded){i.call(this);return}MagicTools.onDomReadyList.push(i);if(MagicTools.onDomReadyList.length<=1){MagicTools.bindDomReady()}}t=MagicTools.$(t);if(t.addEventListener){t.addEventListener(e,i,false)}else{t.attachEvent("on"+e,i)}},remove:function(t,e,i){t=MagicTools.$(t);if(t.removeEventListener){t.removeEventListener(e,i,false)}else{t.detachEvent("on"+e,i)}},stop:function(t){if(t.stopPropagation){t.stopPropagation()}else{t.cancelBubble=true}if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}},fire:function(t,e,i){t=MagicTools.$(t);if(t==document&&document.createEvent&&!t.dispatchEvent)t=document.documentElement;var o;if(document.createEvent){o=document.createEvent(e);o.initEvent(i,true,true)}else{o=document.createEventObject();o.eventType=e}if(document.createEvent){t.dispatchEvent(o)}else{t.fireEvent("on"+i,o)}return o}},String:{trim:function(t){return t.replace(/^\s+|\s+$/g,"")},camelize:function(t){return t.replace(/-(\D)/g,function(t,e){return e.toUpperCase()})}},Element:{hasClass:function(t,e){if(!(t=MagicTools.$(t))){return}return(" "+t.className+" ").indexOf(" "+e+" ")>-1},addClass:function(t,e){if(!(t=MagicTools.$(t))){return}if(!MagicTools.Element.hasClass(t,e)){t.className+=(t.className?" ":"")+e}},removeClass:function(t,e){if(!(t=MagicTools.$(t))){return}t.className=MagicTools.String.trim(t.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)"),"$1"))},getStyle:function(t,e){t=MagicTools.$(t);e=e=="float"?"cssFloat":MagicTools.String.camelize(e);var i=t.style[e];if(!i&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);i=o?o[e]:null}else if(!i&&t.currentStyle){i=t.currentStyle[e]}if("opacity"==e)return i?parseFloat(i):1;if(/^(border(Top|Bottom|Left|Right)Width)|((padding|margin)(Top|Bottom|Left|Right))$/.test(e)){i=parseInt(i)?i:"0px"}return i=="auto"?null:i},setStyle:function(t,i){function o(t,e){if("number"===typeof e&&!("zIndex"===t||"zoom"===t)){return"px"}return""}t=MagicTools.$(t);var s=t.style;for(var a in i){try{if("opacity"===a){MagicTools.Element.setOpacity(t,i[a]);continue}if("float"===a){s["undefined"===typeof s.styleFloat?"cssFloat":"styleFloat"]=i[a];continue}s[MagicTools.String.camelize(a)]=i[a]+o(MagicTools.String.camelize(a),i[a])}catch(e){}}return t},setOpacity:function(t,e){t=MagicTools.$(t);var i=t.style;e=parseFloat(e);if(e==0){if("hidden"!=i.visibility)i.visibility="hidden"}else{if(e>1){e=parseFloat(e/100)}if("visible"!=i.visibility)i.visibility="visible"}if(!t.currentStyle||!t.currentStyle.hasLayout){i.zoom=1}if(MagicTools.browser.ie){i.filter=e==1?"":"alpha(opacity="+e*100+")"}i.opacity=e;return t},getSize:function(t){t=MagicTools.$(t);return{width:t.offsetWidth,height:t.offsetHeight}},getScrolls:function(t){t=MagicTools.$(t);var e={x:0,y:0};while(t&&!MagicTools.isBody(t)){e.x+=t.scrollLeft;e.y+=t.scrollTop;t=t.parentNode}return e},getPosition:function(t,e){e=e||false;t=MagicTools.$(t);var i=MagicTools.Element.getScrolls(t);var o=0,s=0;do{o+=t.offsetLeft||0;s+=t.offsetTop||0;t=t.offsetParent;if(e){while(t&&"relative"==t.style.position){t=t.offsetParent}}}while(t);return{top:s-i.y,left:o-i.x}},getRect:function(t,e){var i=MagicTools.Element.getPosition(t,e);var o=MagicTools.Element.getSize(t);return{top:i.top,bottom:i.top+o.height,left:i.left,right:i.left+o.width}},update:function(t,e){t=MagicTools.$(t);if(t){t.innerHTML=e}}},Transition:{linear:function(t){return t},sin:function(t){return-(Math.cos(Math.PI*t)-1)/2},quadIn:function(t){return Math.pow(t,2)},quadOut:function(t){return 1-MagicTools.Transition.quadIn(1-t)},cubicIn:function(t){return Math.pow(t,3)},cubicOut:function(t){return 1-MagicTools.Transition.cubicIn(1-t)},backIn:function(t,e){e=e||1.618;return Math.pow(t,2)*((e+1)*t-e)},backOut:function(t,e){return 1-MagicTools.Transition.backIn(1-t)},elastic:function(t,e){e=e||[];return Math.pow(2,10*--t)*Math.cos(20*t*Math.PI*(e[0]||1)/3)},none:function(t){return 0}},onDomReadyList:[],onDomReadyTimer:null,onDomReady:function(){if(MagicTools.browser.domLoaded){return}MagicTools.browser.domLoaded=true;if(MagicTools.onDomReadyTimer){clearTimeout(MagicTools.onDomReadyTimer)}for(var t=0,e=MagicTools.onDomReadyList.length;t<e;t++){MagicTools.onDomReadyList[t].apply(document)}},bindDomReady:function(){if(MagicTools.browser.webkit){(function(){if(MagicTools.inArray(document.aq,["loaded","complete"])){MagicTools.onDomReady();return}MagicTools.onDomReadyTimer=setTimeout(arguments.callee,50);return})()}if(MagicTools.browser.ie&&window==top){(function(){try{document.documentElement.doScroll("left")}catch(e){MagicTools.onDomReadyTimer=setTimeout(arguments.callee,50);return}MagicTools.onDomReady()})()}if(MagicTools.browser.opera){MagicTools.Event.add(document,"DOMContentLoaded",function(){for(var t=0,e=document.styleSheets.length;t<e;t++){if(document.styleSheets[t].disabled){MagicTools.onDomReadyTimer=setTimeout(arguments.callee,50);return}MagicTools.onDomReady()}})}MagicTools.Event.add(document,"DOMContentLoaded",MagicTools.onDomReady);MagicTools.Event.add(window,"load",MagicTools.onDomReady)}};MagicTools.Render=function(){this.init.apply(this,arguments)};MagicTools.Render.prototype={defaults:{fps:50,duraton:.5,transition:MagicTools.Transition.sin,onStart:function(){},onComplete:function(){},onBeforeRender:function(){}},options:{},init:function(t,e){this.el=t;this.options=MagicTools.extend(MagicTools.extend({},this.defaults),e);this.timer=false},calc:function(t,e){return(t[1]-t[0])*e+t[0]},start:function(t){this.styles=t;this.state=0;this.curFrame=0;this.startTime=MagicTools.now();this.finishTime=this.startTime+this.options.duration*1e3;this.timer=setInterval(MagicTools.bind(this.loop,this),Math.round(1e3/this.options.fps));this.options.onStart()},loop:function(){var t=MagicTools.now();if(t>=this.finishTime){if(this.timer){clearInterval(this.timer);this.timer=false}this.render(1);setTimeout(this.options.onComplete,10);this.options.onComplete=function(){};return this}var e=this.options.transition((t-this.startTime)/(this.options.duration*1e3));this.render(e)},render:function(t){var e={};for(var i in this.styles){if("opacity"===i){e[i]=Math.round(this.calc(this.styles[i],t)*100)/100}else{e[i]=Math.round(this.calc(this.styles[i],t))}}this.options.onBeforeRender(e);MagicTools.Element.setStyle(this.el,e)}};if(!Array.prototype.indexOf){MagicTools.extend(Array.prototype,{indexOf:function(t,e){var i=this.length;for(var o=e<0?Math.max(0,i+e):e||0;o<i;o++){if(this[o]===t)return o}return-1}})}})();var MagicThumb={version:"1.5.04",thumbs:[],activeIndexes:[],zIndex:1001,bgFader:false,defaults:{transition:MagicTools.Transition.quadIn,zIndex:1001,duration:.5,allowMultipleImages:false,keepThumbnail:false,zoomPosition:"center",zoomPositionOffset:{top:0,left:0,bottom:0,right:0},zoomTrigger:"click",zoomTriggerDelay:.5,backgroundFadingOpacity:0,backgroundFadingColor:"#000000",backgroundFadingDuration:.2,allowKeyboard:true,useCtrlKey:false,captionSlideDuration:.25,captionSrc:"span",controlbarEnable:true,controlbarPosition:"top right",controlbarButtons:["prev","next","close"],disableContextMenu:true,loadingMsg:"Loading...",loadingOpacity:.75,fitToScreen:true,autoInit:true},options:{},cbButtons:{prev:{index:0,title:"Previous"},next:{index:1,title:"Next"},close:{index:2,title:"Close"}},init:function(t){t=t||false;this.options=MagicTools.extend(this.defaults,this.options);var e=/(auto|center|absolute|relative)/i.exec(this.options.zoomPosition);switch(e[1]){case"auto":this.options.zoomPosition="auto";break;case"absolute":this.options.zoomPosition="absolute";break;case"relative":this.options.zoomPosition="relative";break;case"center":default:this.options.zoomPosition="center";break}this.options.zoomTrigger=/mouseover/i.test(this.options.zoomTrigger)?"mouseover":"click";this.zIndex=this.options.zIndex;var i=document.getElementsByTagName("a");var o=i.length;var s=0;for(var a=0;a<o;a++){if(MagicTools.Element.hasClass(i[a],"MagicThumb")){MagicThumb.thumbs.push(new MagicThumb.Item(i[a],null,s++,{expandDuration:this.options.zoomDuration||this.options.duration,collapseDuration:this.options.restoreDuration||this.options.duration,captionSlideDuration:this.options.captionSlideDuration,captionSrc:this.options.captionSrc,transition:this.options.transition,keepThumbnail:this.options.keepThumbnail,zoomTrigger:this.options.zoomTrigger,zoomTriggerDelay:this.options.zoomTriggerDelay,zoomPosition:this.options.zoomPosition,zoomPositionOffset:this.options.zoomPositionOffset}))}}if(!t&&MagicThumb.options.disableContextMenu){MagicTools.Event.add(document,"contextmenu",function(t){var e=MagicThumb.getFocused();if(e!=null&&undefined!=e){var i=MagicTools.Element.getRect(e.bigImg);if(t.clientX>=i.left&&t.clientX<=i.right&&(t.clientY>=i.top&&t.clientY<=i.bottom)){MagicTools.Event.stop(t);return false}}})}},stop:function(){for(var t=MagicThumb.thumbs.pop();t!=null&&undefined!=t;t=MagicThumb.thumbs.pop()){t.destroy();delete t}MagicThumb.thumbs=[];MagicThumb.activeIndexes=[]},refresh:function(){this.stop();setTimeout(function(){MagicThumb.init(true)},10);return},expand:function(t,e){if(t){MagicTools.Event.stop(t)}var i=MagicThumb.getFocused(),o=MagicThumb.getItem(e);if(undefined==o){return}if(!MagicThumb.options.allowMultipleImages&&undefined!=i&&e!=i.index){i.collapse(null,o,true)}else{o.expand(this.zIndex)}},setFocused:function(t){var e=this.activeIndexes.indexOf(t);if(-1!==e){this.activeIndexes.splice(e,1)}this.activeIndexes.push(t)},getFocused:function(){return this.activeIndexes.length>0?this.getItem(this.activeIndexes[this.activeIndexes.length-1]):undefined},unsetFocused:function(t){var e=this.activeIndexes.indexOf(t);if(-1===e){return}this.activeIndexes.splice(e,1)},getItem:function(t){var e=undefined;for(var i=0,o=MagicThumb.thumbs.length;i<o;i++){if(t==MagicThumb.thumbs[i].index){e=MagicThumb.thumbs[i];break}}return e},getGroupItems:function(t){t=t||null;var e=[];for(var i=0,o=MagicThumb.thumbs.length;i<o;i++){if(t==MagicThumb.thumbs[i].group){e.push(MagicThumb.thumbs[i].index)}}return e.sort(function(t,e){return t-e})},getNext:function(t,e){t=t||null;e=e||false;var i=MagicThumb.getGroupItems(MagicThumb.getFocused().group);var o=i.indexOf(MagicThumb.getFocused().index)+1;return o>=i.length?!e?undefined:MagicThumb.getItem(i[0]):MagicThumb.getItem(i[o])},getPrev:function(t,e){t=t||null;e=e||false;var i=MagicThumb.getGroupItems(MagicThumb.getFocused().group);var o=i.indexOf(MagicThumb.getFocused().index)-1;return o<0?!e?undefined:MagicThumb.getItem(i[i.length-1]):MagicThumb.getItem(i[o])},getFirst:function(t){t=t||null;var e=MagicThumb.getGroupItems(t);return e.length?MagicThumb.getItem(e[0]):undefined},getLast:function(t){t=t||null;var e=MagicThumb.getGroupItems(t);return e.length?MagicThumb.getItem(e[e.length-1]):undefined},onKey:function(t){if(!MagicThumb.options.allowKeyboard){MagicTools.Event.remove(document,"keydown",MagicThumb.onKey);return true}var e=t.keyCode,i=null,o=false;switch(e){case 27:i=0;break;case 32:i=1;o=true;break;case 34:i=1;break;case 33:i=-1;break;case 39:case 40:if(MagicThumb.options.useCtrlKey?t.ctrlKey||t.metaKey:true){i=1}break;case 37:case 38:if(MagicThumb.options.useCtrlKey?t.ctrlKey||t.metaKey:true){i=-1}break}if(null!==i){if(MagicThumb.activeIndexes.length>0){MagicTools.Event.stop(t)}try{var s=MagicThumb.getFocused();var a=null;if(0==i){s.collapse(null)}else if(-1==i){a=MagicThumb.getPrev(s.group,o)}else if(1==i){a=MagicThumb.getNext(s.group,o)}if(undefined!=a){s.collapse(null,a)}}catch(t){if(console){console.warn(t.description)}}}},fixCursor:function(t){if(MagicTools.browser.opera){MagicTools.Element.setStyle(t,{cursor:"pointer"})}},fadeInBackground:function(){if(MagicThumb.bgFader&&"none"!=MagicTools.Element.getStyle(MagicThumb.bgFader,"display")){return}if(!MagicThumb.bgFader){MagicThumb.bgFader=document.createElement("div");MagicTools.Element.addClass(MagicThumb.bgFader,"MagicThumb-bgfader");var t=MagicTools.getPageSize();MagicTools.Element.setStyle(MagicThumb.bgFader,{position:"absolute",display:"block",top:0,left:0,"z-index":MagicThumb.zIndex-1,width:t.pageWidth,height:t.pageHeight,"background-color":MagicThumb.options.backgroundFadingColor,opacity:0});var e=document.createElement("iframe");e.src='javascript:"";';MagicTools.Element.setStyle(e,{width:"100%",height:"100%",display:"block",filter:"mask()",top:0,lef:0,position:"absolute","z-index":-1,border:"none"});MagicThumb.bgFader.appendChild(e);document.body.appendChild(MagicThumb.bgFader);MagicTools.Event.add(window,"resize",function(){var t=MagicTools.getPageSize();MagicTools.Element.setStyle(MagicThumb.bgFader,{width:t.width,height:t.height});setTimeout(function(){var t=MagicTools.getPageSize();MagicTools.Element.setStyle(MagicThumb.bgFader,{width:t.pageWidth,height:t.pageHeight})},1)})}new MagicTools.Render(MagicThumb.bgFader,{duration:MagicThumb.options.backgroundFadingDuration,transition:MagicTools.Transition.linear,onStart:function(){MagicTools.Element.setStyle(MagicThumb.bgFader,{display:"block",opacity:0})}}).start({opacity:[0,MagicThumb.options.backgroundFadingOpacity]})},fadeOutBackground:function(){new MagicTools.Render(MagicThumb.bgFader,{duration:MagicThumb.options.backgroundFadingDuration,transition:MagicTools.Transition.linear,onComplete:function(){MagicTools.Element.setStyle(MagicThumb.bgFader,{display:"none"})}}).start({opacity:[MagicThumb.options.backgroundFadingOpacity,0]})}};MagicThumb.Item=function(){this.init.apply(this,arguments)};MagicThumb.Item.prototype={init:function(t,i,o,s){this.options={};this.anchor=t;this.index=o;this.group=i;this.zoomed=false;this.rendering=false;this.hasCaption=false;this.cont=false;this.caption=false;this.controlbar=false;this.bigImg=false;this.eventsCache=[];this.initTimer=null;this.cr=null;this.firstRun=true;this.loaded=false;var a=null;try{a=this.anchor.getElementsByTagName("img")[0]}catch(e){}if(a){var n=MagicTools.Element.getRect(a)}else{var n=MagicTools.Element.getRect(this.anchor)}this.loader=document.createElement("div");MagicTools.Element.addClass(this.loader,"MagicThumb-loading");MagicTools.Element.setStyle(this.loader,{display:"block",overflow:"hidden",opacity:MagicThumb.options.loadingOpacity,position:"absolute","vertical-align":"middle",visibility:"hidden","max-width":n.right-n.left-4});if(MagicTools.browser.ie&&MagicTools.browser.backCompatMode){MagicTools.Element.setStyle(this.loader,{width:n.right-n.left-4})}this.loader.appendChild(document.createTextNode(MagicThumb.options.loadingMsg));document.body.appendChild(this.loader);MagicTools.Element.setStyle(this.loader,{top:Math.round(n.bottom-(n.bottom-n.top)/2-MagicTools.Element.getSize(this.loader).height/2),left:Math.round(n.right-(n.right-n.left)/2-MagicTools.Element.getSize(this.loader).width/2)});this.preventClick=MagicTools.bind(function(t){if(!this.loaded){MagicTools.Event.stop(t);MagicTools.Element.setStyle(this.loader,{visibility:"visible"});return}MagicTools.Event.remove(this.anchor,"click",this.preventClick);this.peventClick=null},this);MagicTools.Event.add(this.anchor,"click",this.preventClick);this.options=MagicTools.extend(this.options,s);this.onImgLoad=MagicTools.bind(this.prepare,this);if(MagicThumb.options.autoInit){this.preload()}},destroy:function(){if(this.initTimer){clearTimeout(this.initTimer);this.initTimer=null}for(var t=this.eventsCache.pop();t!=null&&undefined!=t;t=this.eventsCache.pop()){MagicTools.Event.remove(t.obj,t.evt,t.handler);delete t}delete this.eventsCache;if(MagicTools.inArray(this.loader,MagicTools.$A(document.body.getElementsByTagName(this.loader.tagName)))){document.body.removeChild(this.loader)}if(this.bigImg){this.bigImg.src=null}if(!this.zoomed){if(MagicTools.inArray(this.bigImg,MagicTools.$A(document.body.getElementsByTagName(this.bigImg.tagName)))){document.body.removeChild(this.bigImg)}}else{MagicTools.Element.removeClass(this.anchor,"MagicThumb-zoomed");MagicTools.Element.setStyle(this.smallImg,{visibility:"visible"});MagicThumb.fixCursor(this.anchor)}this.toggleMZ();if(MagicTools.inArray(this.cont,MagicTools.$A(document.body.getElementsByTagName(this.cont.tagName)))){document.body.removeChild(this.cont)}},addEvent:function(t,e,i){MagicTools.Event.add(t,e,i);this.eventsCache.push({obj:t,evt:e,handler:i})},preload:function(){this.bigImg=document.createElement("img");this.addEvent(this.bigImg,"load",this.onImgLoad);this.initTimer=setTimeout(MagicTools.bind(function(){this.bigImg.src=this.anchor.href},this),1)},createControlBar:function(){this.controlbar=document.createElement("div");MagicTools.Element.setStyle(this.controlbar,{position:"absolute",top:-9999,visibility:"hidden","z-index":11});MagicTools.Element.addClass(this.controlbar,"MagicThumb-controlbar");this.cont.appendChild(this.controlbar);var t=[];var e=this.options.controlbarButtons||MagicThumb.options.controlbarButtons;var i=e.length;for(var o=0;o<i;o++){if("next"==e[o]&&MagicThumb.getLast(this.group)===this){continue}if("prev"==e[o]&&MagicThumb.getFirst(this.group)===this){continue}var s=MagicThumb.cbButtons[e[o]];var a=document.createElement("a");a.title=s.title;a.href="#";a.rel=e[o];MagicTools.Element.setStyle(a,{"float":"left",position:"relative"});a=this.controlbar.appendChild(a);var n=-s.index*parseInt(MagicTools.Element.getStyle(a,"width"));var l=parseInt(MagicTools.Element.getStyle(a,"height"));var g=document.createElement("span");MagicTools.Element.setStyle(g,{left:n,cursor:"pointer"});a.appendChild(g);var r=document.createElement("img");MagicTools.Element.setStyle(r,{position:"absolute",top:-999});r=document.body.appendChild(r);MagicTools.Event.add(r,"load",MagicTools.bind(function(t){MagicTools.Event.remove(t,"load",arguments.callee);MagicTools.Element.setStyle(this,{width:t.width,height:t.height});document.body.removeChild(t)},g,r));r.src=MagicTools.Element.getStyle(g,"background-image").replace(/url\s*\(\s*\"{0,1}([^\"]*)\"{0,1}\s*\)/i,"$1");if(MagicTools.browser.ie6){var h=MagicTools.Element.getStyle(g,"background-image");h=h.replace(/url\s*\(\s*"(.*)"\s*\)/i,"$1");g.style.display="inline-block";MagicTools.Element.setStyle(g,{"z-index":1,position:"relative"});g.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+h+"', sizingMethod='crop')";g.style.backgroundImage="none"}this.addEvent(a,"mouseover",MagicTools.bindAsEvent(function(t,e,i){MagicTools.Element.setStyle(this.firstChild,{left:e,top:i})},a,n,-l));this.addEvent(a,"mouseout",MagicTools.bindAsEvent(function(t,e,i){MagicTools.Element.setStyle(this.firstChild,{left:e,top:0})},a,n));this.addEvent(a,"click",MagicTools.bindAsEvent(this.onCBClick,this));if("close"==a.rel&&/left/i.test(this.options.controlbarPosition||MagicThumb.options.controlbarPosition)&&this.controlbar.firstChild!==a){a=this.controlbar.insertBefore(a,this.controlbar.firstChild)}}if(MagicTools.browser.ie6){this.cbOverlay=document.createElement("div");MagicTools.Element.setStyle(this.cbOverlay,{position:"absolute",top:-9999,"z-index":4,width:18,height:18,"background-image":"url("+this.bigImg.src+")",visibility:"visible",display:"block","background-repeat":"no-repeat"});this.cont.appendChild(this.cbOverlay)}},prepare:function(){function t(t){var e="";for(i=0;i<t.length;i++){e+=String.fromCharCode(14^t.charCodeAt(i))}return e}function e(t){var e=/\[a([^\]]+)\](.*?)\[\/a\]/gi;return t.replace(e,"<a $1>$2</a>")}MagicTools.Event.remove(this.bigImg,"load",this.onImgLoad);this.cont=document.createElement("div");MagicTools.Element.setStyle(this.cont,{position:"absolute",display:"block",visibility:"hidden"});MagicTools.Element.addClass(this.cont,"MagicThumb-container");document.body.appendChild(this.cont);this.smallImg=this.anchor.getElementsByTagName("img")[0];if(!this.smallImg){this.smallImg=document.createElement("img");this.smallImg.src="data:image/gif;base64,R0lGODlhAQABAIAAACqk1AAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";MagicTools.Element.setStyle(this.smallImg,{width:0,height:0,opacity:0});this.anchor.appendChild(this.smallImg)}this.caption=document.createElement("div");if("img:alt"==this.options.captionSrc.toLowerCase()&&""!=(this.smallImg.alt||"")){this.caption.innerHTML=e(this.smallImg.alt);this.hasCaption=true;MagicTools.Element.setStyle(this.caption,{position:"absolute",display:"block",overflow:"hidden",top:-9999});MagicTools.Element.addClass(this.caption,"MagicThumb-caption")}else if("img:title"==this.options.captionSrc.toLowerCase()&&""!=(this.smallImg.title||"")){this.caption.innerHTML=e(this.smallImg.title);this.hasCaption=true;MagicTools.Element.setStyle(this.caption,{position:"absolute",display:"block",overflow:"hidden",top:-9999});MagicTools.Element.addClass(this.caption,"MagicThumb-caption")}else if(this.anchor.getElementsByTagName("span").length){this.hasCaption=true;this.caption.innerHTML=e(this.anchor.getElementsByTagName("span")[0].innerHTML.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"));MagicTools.Element.setStyle(this.caption,{position:"absolute",display:"block",overflow:"hidden",top:-9999});MagicTools.Element.addClass(this.caption,"MagicThumb-caption")}if(""==this.caption.innerHTML){MagicTools.Element.setStyle(this.caption,{"font-size":0,height:0,outline:"none",border:"none","line-height":0})}this.cont.appendChild(this.caption);MagicTools.extend(this.caption,{paddingLeft:parseInt(MagicTools.Element.getStyle(this.caption,"padding-left")),paddingRight:parseInt(MagicTools.Element.getStyle(this.caption,"padding-right"))});MagicTools.Element.setStyle(this.bigImg,{position:"absolute",top:-9999});this.bigImg=document.body.appendChild(this.bigImg);var o={pos:MagicTools.Element.getPosition(this.smallImg),size:MagicTools.Element.getSize(this.smallImg)};MagicTools.extend(this.bigImg,{fullWidth:this.bigImg.width,fullHeight:this.bigImg.height,initTop:o.pos.top,initLeft:o.pos.left,initWidth:o.size.width,initHeight:o.size.height,displayWidth:this.bigImg.width,displayHeight:this.bigImg.height,ratio:this.bigImg.width/this.bigImg.height});MagicTools.Element.addClass(this.bigImg,"MagicThumb-image");MagicTools.extend(this.bigImg,{completeWidth:MagicTools.Element.getSize(this.bigImg).width,completeHeight:MagicTools.Element.getSize(this.bigImg).height});MagicTools.Element.setStyle(this.caption,{width:this.bigImg.completeWidth-this.caption.paddingLeft-this.caption.paddingRight-parseInt(MagicTools.Element.getStyle(this.bigImg,"border-left-width"))-parseInt(MagicTools.Element.getStyle(this.bigImg,"border-right-width"))-parseInt(MagicTools.Element.getStyle(this.caption,"border-left-width"))-parseInt(MagicTools.Element.getStyle(this.caption,"border-right-width")),"padding-left":this.caption.paddingLeft+parseInt(MagicTools.Element.getStyle(this.bigImg,"border-left-width")),"padding-right":this.caption.paddingRight+parseInt(MagicTools.Element.getStyle(this.bigImg,"border-right-width"))});if(MagicTools.browser.ie&&(document.compatMode&&"backcompat"==document.compatMode.toLowerCase())){MagicTools.Element.setStyle(this.caption,{width:this.bigImg.completeWidth})}MagicTools.extend(this.caption,{fullHeight:MagicTools.Element.getSize(this.caption).height});MagicTools.Element.setStyle(this.bigImg,{display:"none"});var s=["","#ff0000",12,"bold"];if("undefined"!==typeof s){var a=t(s[0]);var n=document.createElement("div");MagicTools.Element.setStyle(n,{display:"inline",overflow:"hidden",visibility:"visible",color:s[1],"font-size":s[2],"font-weight":s[3],"font-family":"Tahoma",position:"absolute",width:this.bigImg.completeWidth*.9,"text-align":"right",right:15,top:this.bigImg.fullHeight-20,"z-index":10});n.innerHTML=a;if(n.lastChild&&1==n.lastChild.nodeType){MagicTools.Element.setStyle(n.lastChild,{display:"inline",visibility:"visible",color:s[1]})}this.cont.appendChild(n);MagicTools.Element.setStyle(n,{width:"90%",top:this.bigImg.fullHeight-MagicTools.Element.getSize(n).height-8});this.cr=n}if(true===(this.options.controlbarEnable||MagicThumb.options.controlbarEnable)){this.createControlBar();this.addEvent(this.cont,"mouseover",MagicTools.bindAsEvent(this.toggleControlBar,this,true));this.addEvent(this.cont,"mouseout",MagicTools.bindAsEvent(this.toggleControlBar,this))}MagicTools.Element.setStyle(this.cont,{display:"none"});if("mouseover"==this.options.zoomTrigger){this.addEvent(this.anchor,"mouseover",MagicTools.bindAsEvent(function(t){MagicTools.Event.stop(t);this.hoverTimer=setTimeout(MagicTools.bind(MagicThumb.expand,MagicThumb,null,this.index),this.options.zoomTriggerDelay*1e3);this.addEvent(this.anchor,"mouseout",MagicTools.bindAsEvent(function(){MagicTools.Event.stop(t);if(this.hoverTimer){clearTimeout(this.hoverTimer);this.hoverTimer=false}},this))},this))}else{this.addEvent(this.anchor,"click",MagicTools.bindAsEvent(MagicThumb.expand,MagicThumb,this.index))}this.loaded=true;document.body.removeChild(this.loader)},adjustPosition:function(t){var e=parseInt(MagicTools.Element.getStyle(this.cont,"padding-left"))+parseInt(MagicTools.Element.getStyle(this.cont,"padding-right"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-left-width"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-right-width")),i=parseInt(MagicTools.Element.getStyle(this.cont,"padding-top"))+parseInt(MagicTools.Element.getStyle(this.cont,"padding-bottom"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-top-width"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-bottom-width"));var o=destLeft=0;MagicTools.Element.setStyle(this.bigImg,{width:this.bigImg.displayWidth,height:this.bigImg.displayHeight,top:-9999,display:"block"});var s=MagicTools.Element.getSize(this.bigImg);if("center"==this.options.zoomPosition){o=Math.round((t.height-i)/2+t.scrollY-(s.height+this.caption.fullHeight)/2);destLeft=Math.round((t.width-e)/2+t.scrollX-s.width/2);if(o<t.scrollY+10){o=t.scrollY+10}if(destLeft<t.scrollX+10){destLeft=t.scrollX+10}}if("auto"==this.options.zoomPosition){var a=MagicTools.Element.getRect(this.smallImg);o=a.bottom-Math.round((a.bottom-a.top)/2)-Math.round(s.height/2);if(o+s.height+this.caption.fullHeight>t.height+t.scrollY-15){o=t.height+t.scrollY-15-s.height-this.caption.fullHeight}if(o<t.scrollY+10){o=t.scrollY+10}destLeft=Math.round(a.right-(a.right-a.left)/2-s.width/2);if(destLeft+s.width>t.width+t.scrollX-15){destLeft=t.width+t.scrollX-s.width-15}if(destLeft<t.scrollX+10){destLeft=t.scrollX+10}}if("absolute"==this.options.zoomPosition){o=parseInt(this.options.zoomPositionOffset.top+t.scrollY);if(parseInt(this.options.zoomPositionOffset.bottom)>0){o=t.height+t.scrollY-parseInt(this.options.zoomPositionOffset.bottom)-s.height-this.caption.fullHeight}destLeft=parseInt(this.options.zoomPositionOffset.left+t.scrollX);if(parseInt(this.options.zoomPositionOffset.right)>0){destLeft=t.width+t.scrollX-parseInt(this.options.zoomPositionOffset.right)-s.width}}if("relative"==this.options.zoomPosition){var a=MagicTools.Element.getRect(this.smallImg);if("auto"==this.options.zoomPositionOffset.top){o=a.bottom-Math.round((a.bottom-a.top)/2)-Math.round(s.height/2)}else{o=a.top+parseInt(this.options.zoomPositionOffset.top);if(parseInt(this.options.zoomPositionOffset.bottom)>0){o=a.bottom-parseInt(this.options.zoomPositionOffset.bottom)-s.height-this.caption.fullHeight}}if("auto"==this.options.zoomPositionOffset.left){destLeft=Math.round(a.right-(a.right-a.left)/2-s.width/2)}else{destLeft=a.left+parseInt(this.options.zoomPositionOffset.left);if(parseInt(this.options.zoomPositionOffset.right)>0){destLeft=a.right-parseInt(this.options.zoomPositionOffset.right)-s.width}}if(o+s.height+this.caption.fullHeight>t.height+t.scrollY-15){o=t.height+t.scrollY-15-s.height-this.caption.fullHeight}if(o<t.scrollY+10){o=t.scrollY+10}if(destLeft+s.width>t.width+t.scrollX-15){destLeft=t.width+t.scrollX-s.width-15}if(destLeft<t.scrollX+10){destLeft=t.scrollX+10}}return{top:o,left:destLeft}},expand:function(t){if(this.zoomed){this.focus();return false}if(!this.zoomed&&this.rendering){return false}this.zIndex=t;var e=MagicTools.getPageSize();var i=MagicTools.Element.getPosition(this.smallImg);MagicTools.extend(this.bigImg,{initTop:i.top,initLeft:i.left});var o={display:"block",position:"absolute",opacity:this.options.keepThumbnail?0:1,top:this.bigImg.initTop,left:this.bigImg.initLeft,width:"auto",height:"auto"};if(MagicThumb.options.fitToScreen){this.bigImg.displayWidth=this.bigImg.fullWidth;this.bigImg.displayHeight=this.bigImg.fullHeight;this.resizeCaption();this.resizeImage(e);if(this.cr){MagicTools.Element.setStyle(this.cr,{width:this.bigImg.displayWidth*.9,top:this.bigImg.displayHeight-20});MagicTools.Element.setStyle(this.cont,{display:"block"});MagicTools.Element.setStyle(this.cr,{width:"90%",top:this.bigImg.displayHeight-MagicTools.Element.getSize(this.cr).height-8})}}MagicTools.extend(o,{width:this.bigImg.initWidth});var s=this.adjustPosition(e);var a={opacity:[this.options.keepThumbnail?0:1,1],top:[this.bigImg.initTop,s.top],left:[this.bigImg.initLeft,s.left],width:[this.bigImg.initWidth,this.bigImg.displayWidth]};new MagicTools.Render(this.bigImg,{duration:this.options.expandDuration,transition:this.options.transition,onStart:MagicTools.bind(function(){this.toggleMZ(false);MagicTools.Element.setStyle(this.bigImg,o);if(!this.options.keepThumbnail){MagicTools.Element.setStyle(this.smallImg,{visibility:"hidden"})}var t=MagicThumb.getFocused();if(undefined!=t){this.zIndex=t.zIndex+1}MagicTools.Element.setStyle(this.bigImg,{"z-index":this.zIndex});this.overlap=document.createElement("div");MagicTools.Element.setStyle(this.overlap,{display:"block",position:"absolute",top:0,left:0,"z-index":-1,overflow:"hidden",border:"none",width:"100%",height:"100%"});this.iframe=document.createElement("iframe");this.iframe.src='javascript: "";';MagicTools.Element.setStyle(this.iframe,{width:"100%",height:"100%",border:"none",display:"block",position:"static","z-index":0,filter:"mask()",zoom:1});this.overlap.appendChild(this.iframe);this.cont.appendChild(this.overlap)},this),onComplete:MagicTools.bind(function(){MagicTools.Element.addClass(this.anchor,"MagicThumb-zoomed");MagicTools.Element.addClass(this.bigImg,"MagicThumb-image-zoomed");var t=MagicTools.Element.getSize(this.bigImg);MagicTools.Element.setStyle(this.cont,{left:MagicTools.Element.getPosition(this.bigImg).left,top:MagicTools.Element.getPosition(this.bigImg).top,width:t.width,visibility:"visible"});this.cont.insertBefore(this.bigImg,this.cont.firstChild);MagicTools.Element.setStyle(this.cont,{display:"block","z-index":this.zIndex});MagicTools.Element.setStyle(this.bigImg,{position:"relative",top:0,left:0,"z-index":2});if(MagicTools.browser.ie){MagicTools.Element.setStyle(this.overlap,{width:MagicTools.Element.getSize(this.cont).width,height:MagicTools.Element.getSize(this.cont).height})}if(this.controlbar){var e=MagicTools.Element.getSize(this.controlbar);MagicTools.Element.setStyle(this.controlbar,{position:"absolute","z-index":11,visibility:MagicTools.browser.ie6?"visible":"hidden",top:/bottom/i.test(this.options.controlbarPosition||MagicThumb.options.controlbarPosition)?t.height-e.height-5:5,left:/right/i.test(this.options.controlbarPosition||MagicThumb.options.controlbarPosition)?t.width-e.width-5:5});if(MagicTools.browser.ie6){MagicTools.Element.setStyle(this.cbOverlay,{visibility:"visible",width:e.width,height:e.height,top:this.controlbar.offsetTop,left:this.controlbar.offsetLeft,"background-position":""+(MagicTools.Element.getPosition(this.cont).left-MagicTools.Element.getPosition(this.controlbar).left+parseInt(MagicTools.Element.getStyle(this.bigImg,"border-left-width")))+"px "+(MagicTools.Element.getPosition(this.cont).top-MagicTools.Element.getPosition(this.controlbar).top+parseInt(MagicTools.Element.getStyle(this.bigImg,"border-top-width")))+"px"})}MagicTools.Event.fire(this.cont,"MouseEvents","mouseover")}MagicThumb.fixCursor(this.bigImg);if(this.firstRun){this.addEvent(this.bigImg,"mousedown",function(t){MagicTools.Event.stop(t)});this.addEvent(this.bigImg,"click",this.collapseEvent=MagicTools.bindAsEvent(this.collapse,this))}if(""!=this.caption.innerHTML){this.toggleCaption(1);this.focus(this.options.captionSlideDuration*1e3+10)}else{this.focus(0)}if(parseFloat(MagicThumb.options.backgroundFadingOpacity)>0){MagicThumb.fadeInBackground()}this.rendering=false;this.zoomed=true;this.firstRun=false},this)}).start(a)},collapse:function(t,e,i){if(t){MagicTools.Event.stop(t)}if(!this.zoomed||this.zoomed&&this.rendering){return false}this.rendering=true;i=i||false;MagicTools.Event.remove(document,"keydown",MagicThumb.onKey);if(MagicThumb.options.allowMultipleImages&&undefined!=e){MagicTools.Event.fire(e.anchor,"MouseEvents","click");return false}new MagicTools.Render(this.caption,{duration:!this.hasCaption||i?0:this.options.captionSlideDuration,transition:MagicTools.Transition.sin,onStart:MagicTools.bind(function(){MagicTools.Element.setStyle(this.caption,{"margin-top":0});MagicTools.Element.removeClass(this.bigImg,"MagicThumb-image-zoomed")},this),onComplete:MagicTools.bind(function(){MagicTools.Element.setStyle(this.caption,{visibility:"hidden"});var t=MagicTools.Element.getPosition(this.bigImg);new MagicTools.Render(this.bigImg,{duration:i?0:this.options.collapseDuration,transition:this.options.transition,onStart:MagicTools.bind(function(){this.cont.removeChild(this.overlap);MagicTools.Element.setStyle(this.bigImg,{position:"absolute","z-index":this.zIndex,top:t.top,left:t.left});this.bigImg=document.body.appendChild(this.bigImg);MagicTools.Element.setStyle(this.cont,{top:-9999});if(this.controlbar){MagicTools.Element.setStyle(this.controlbar,{left:0})}},this),onComplete:MagicTools.bind(function(){MagicTools.Element.setStyle(this.smallImg,{visibility:"visible"});MagicTools.Element.setStyle(this.bigImg,{top:-9999});MagicTools.Element.removeClass(this.anchor,"MagicThumb-zoomed");MagicTools.Element.setStyle(this.smallImg,{visibility:"visible"});MagicThumb.fixCursor(this.anchor);this.rendering=false;this.zoomed=false;MagicThumb.unsetFocused(this.index);if(undefined!=e){MagicThumb.expand(null,e.index)}else if(MagicThumb.bgFader){MagicThumb.fadeOutBackground()}this.toggleMZ()},this)}).start({opacity:[1,this.options.keepThumbnail?0:1],width:[this.bigImg.displayWidth,this.bigImg.initWidth],height:[this.bigImg.displayHeight,this.bigImg.initHeight],top:[t.top,this.bigImg.initTop],left:[t.left,this.bigImg.initLeft]})},this)}).start({"margin-top":[0,-this.caption.fullHeight||0]})},focus:function(t){t=t||0;var e=MagicThumb.getFocused();if(undefined!=e){this.zIndex=e.zIndex+1;MagicTools.Element.setStyle(this.cont,{"z-index":this.zIndex})}MagicThumb.setFocused(this.index);setTimeout(function(){MagicTools.Event.remove(document,"keydown",MagicThumb.onKey);MagicTools.Event.add(document,"keydown",MagicThumb.onKey)},t)},toggleCaption:function(){new MagicTools.Render(this.caption,{duration:this.options.captionSlideDuration,transition:MagicTools.Transition.sin,onStart:MagicTools.bind(function(){MagicTools.Element.setStyle(this.caption,{"margin-top":-this.caption.fullHeight});MagicTools.Element.setStyle(this.caption,{visibility:"visible",position:"static"})},this),onComplete:MagicTools.bind(function(){if(MagicTools.browser.ie){MagicTools.Element.setStyle(this.overlap,{width:MagicTools.Element.getSize(this.cont).width,height:MagicTools.Element.getSize(this.cont).height})}},this)}).start({"margin-top":[-this.caption.fullHeight,0]})},toggleControlBar:function(t,e){if(t){MagicTools.Event.stop(t)}e=e||false;var i=MagicTools.Element.getRect(this.cont);var o=document.compatMode&&"backcompat"!=document.compatMode.toLowerCase()?document.documentElement:document.body;var s=t.clientX+parseInt(self.pageXOffset?self.pageXOffset:o.scrollLeft);var a=t.clientY+parseInt(self.pageYOffset?self.pageYOffset:o.scrollTop);var n=/mouseover/i.test(t.type);var l=MagicTools.Element.getStyle(this.controlbar,"visibility");if((!n||"hidden"!=l)&&(s>i.left&&s<i.right)&&(a>i.top&&a<i.bottom)){return}if(n&&"hidden"!=l&&!e){return}if(!n&&"hidden"==l){return}var g=e||n?[0,1]:[1,0];new MagicTools.Render(this.controlbar,{duration:.3,transition:MagicTools.Transition.linear}).start({opacity:g});return},onCBClick:function(t){var e=t.currentTarget||t.srcElement;while(e&&"a"!=e.tagName.toLowerCase()){e=e.offsetParent}var i=true;switch(e.rel){case"prev":this.collapse(null,MagicThumb.getPrev(this.group));break;case"next":this.collapse(null,MagicThumb.getNext(this.group));break;case"close":this.collapse(null);break;default:i=false}if(i){MagicTools.Event.stop(t)}return false},toggleMZ:function(t){t=undefined!==t?t:true;if(MagicTools.Element.hasClass(this.anchor,"MagicZoom")){try{if(t){this.anchor.zoom.recalculating=false}else{this.anchor.zoom.hiderect();this.anchor.zoom.recalculating=true}}catch(e){}}},resizeImage:function(t){var e=parseInt(MagicTools.Element.getStyle(this.cont,"padding-left"))+parseInt(MagicTools.Element.getStyle(this.cont,"padding-right"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-left-width"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-right-width")),i=parseInt(MagicTools.Element.getStyle(this.cont,"padding-top"))+parseInt(MagicTools.Element.getStyle(this.cont,"padding-bottom"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-top-width"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-bottom-width"));var o=Math.min(this.bigImg.displayWidth,t.width-35-e),s=Math.min(this.bigImg.displayHeight,t.height-35-i-this.caption.fullHeight);if(o/s>this.bigImg.ratio){o=s*this.bigImg.ratio}else if(o/s<this.bigImg.ratio){s=o/this.bigImg.ratio}this.bigImg.displayWidth=Math.ceil(o);this.bigImg.displayHeight=Math.ceil(s);this.resizeCaption()},resizeCaption:function(){MagicTools.Element.setStyle(this.caption,{width:this.bigImg.displayWidth-this.caption.paddingLeft-this.caption.paddingRight-parseInt(MagicTools.Element.getStyle(this.caption,"border-left-width"))-parseInt(MagicTools.Element.getStyle(this.caption,"border-right-width"))});MagicTools.Element.setStyle(this.cont,{top:-9999,display:"block"});MagicTools.extend(this.caption,{fullHeight:MagicTools.Element.getSize(this.caption).height});MagicTools.Element.setStyle(this.cont,{display:"none"})}};if(MagicTools.browser.ie6){MagicThumb.Item.prototype.toggleControlBar=function(t,e){if(t){MagicTools.Event.stop(t)}e=e||false;var i=MagicTools.Element.getRect(this.cont);var o=document.compatMode&&"backcompat"!=document.compatMode.toLowerCase()?document.documentElement:document.body;var s=t.clientX+parseInt(self.pageXOffset?self.pageXOffset:o.scrollLeft);var a=t.clientY+parseInt(self.pageYOffset?self.pageYOffset:o.scrollTop);var n=/mouseover/i.test(t.type);var l=MagicTools.Element.getStyle(this.cbOverlay,"visibility");if((!n||!("hidden"!=l))&&(s>i.left&&s<i.right)&&(a>i.top&&a<i.bottom)){return}if(n&&!("hidden"!=l)&&!e){return}if(!n&&"hidden"!=l){return}var g=e||n?[1,0]:[0,1];new MagicTools.Render(this.cbOverlay,{duration:.3,transition:MagicTools.Transition.linear}).start({opacity:g});return};try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}MagicTools.Event.add(document,"domready",function(){MagicThumb.init()});